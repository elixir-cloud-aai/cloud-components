<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="./logo-elixir-cloud-aai.svg" type="image/x-icon" />

    <title>ecc-utils-design</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body>
    <div class="p-10">
      <div id="demo"></div>
    </div>
    <!-- <button id="button">HTML Button</button> -->

    <script type="module">
      import { html, render } from "lit";
      import "../../dist/components/form/index.js";

      const fields = [
        {
          key: "name",
          label: "Name",
          type: "text",
          fieldOptions: {
            required: true,
            tooltip: "Your name",
          },
        },
        {
          key: "email",
          label: "Email",
          type: "email",
          fieldOptions: {
            tooltip: "Your email address",
          },
        },
        {
          key: "18+",
          label: "18+",
          type: "switch",
          fieldOptions: {
            tooltip: "Are you over 18 years old?",
          },
        },
        {
          key: "id",
          label: "ID",
          type: "file",
          fieldOptions: {
            required: true,
            tooltip: "Your ID document",
          },
        },
        {
          key: "id2",
          label: "ID",
          type: "file",
          fileOptions: {
            protocol: "tus",
            tusOptions: {
              endpoint: "https://tusd.tusdemo.net/files/",
            },
          },
        },
        {
          key: "gender",
          label: "Gender",
          type: "select",
          fieldOptions: {
            required: true,
          },
          selectOptions: [
            { label: "Male", value: "1" },
            { label: "Female", value: "2" },
            { label: "Don't want to disclose", value: "3" },
          ],
        },
        {
          key: "address",
          label: "Address",
          type: "group",
          groupOptions: {
            collapsible: true,
            tooltip: "Your address",
          },
          fieldOptions: {
            tooltip: "Group for address",
          },
          arrayOptions: {
            defaultInstances: 1,
            max: 4,
            min: 1,
          },
          children: [
            {
              key: "Details",
              label: "Details",
              type: "array",
              fieldOptions: {
                tooltip: "Details for address",
              },
              arrayOptions: {
                defaultInstances: 0,
                max: 2,
              },
              children: [
                {
                  key: "houseNumber",
                  label: "House Number",
                  type: "text",
                  fieldOptions: {
                    required: true,
                    tooltip: "Your house number",
                  },
                },
                {
                  key: "street",
                  label: "Street",
                  type: "text",
                  fieldOptions: {
                    default: "1601 Harrier Ln",
                    required: false,
                    tooltip: "Your street name",
                  },
                },
                {
                  key: "city",
                  label: "City",
                  type: "text",
                  fieldOptions: {
                    required: true,
                    tooltip: "Your city name",
                  },
                },
                {
                  key: "isPrimary",
                  label: "Primary",
                  type: "switch",
                  fieldOptions: {
                    default: true,
                    tooltip: "Is this your primary residence?",
                  },
                },
              ],
            },
            {
              key: "country",
              label: "Country",
              type: "text",
              fieldOptions: {
                required: true,
                tooltip: "Your country name",
              },
            },
          ],
        },
      ];

      render(
        html`<ecc-d-form
          .fields=${fields}
          @ecc-utils-submit=${async (e) => {
            try {
              console.log("form - submitted", e.detail);
              document.querySelector("ecc-utils-design-form").loading();
              await fetch("https://jsonplaceholder.typicode.com/posts");
              document
                .querySelector("ecc-utils-design-form")
                .success({ message: "Data fetched successfully" });
            } catch (error) {
              document
                .querySelector("ecc-utils-design-form")
                .error({ message: "Error fetching data" });
            }
          }}
        >
          <ecc-d-form-input
            required
            label="On"
            type="switch"
          ></ecc-d-form-input>

          <ecc-d-form-input
            required
            type="text"
            label="name"
            key="name"
            value="different"
            placeholder="enter a name"
          ></ecc-d-form-input>

          <ecc-d-form-input
            multiple
            type="file"
            label="file"
            protocol="tus"
            tooltip="select a file"
            placeholder="enter a name"
            tus-endpoint="https://tusd.tusdemo.net/files/"
          ></ecc-d-form-input>

          <ecc-d-form-group
            type="array"
            label="first group"
            instances="2"
            max-instances="3"
          >
            <ecc-d-form-input
              multiple
              type="select"
              required="true"
              label="Binary Gender"
              tooltip="Do not select"
              placeholder="enter a name"
            >
              <option ecc-option label="male">Male</option>
              <option ecc-option label="female">Female</option>
            </ecc-d-form-input>

            <ecc-d-form-input
              required
              type="text"
              label="name"
              value="John doe"
              placeholder="enter a name"
            ></ecc-d-form-input>

            <ecc-d-form-group
              type="array"
              instances="1"
              label="nested group"
              max-instances="3"
              collapsible="true"
            >
              <ecc-d-form-input
                required
                type="text"
                label="name"
                value="John star"
                placeholder="enter a name"
              ></ecc-d-form-input>
            </ecc-d-form-group>
          </ecc-d-form-group>

          <ecc-d-form-group
            type="group"
            label="second group"
            max-instances="3"
            collapsible="true"
          >
            <ecc-d-form-input
              required
              type="text"
              key="username"
              label="username"
              value="John star"
              placeholder="enter a name"
            ></ecc-d-form-input>
          </ecc-d-form-group>
        </ecc-d-form> `,
        document.querySelector("#demo")
      );
    </script>
  </body>
</html>
